# 2026-02-24 Phase 6 Hardening

## Scope of This Log

- 대상: `specs/02-email-auth-backend`
- 관점: Gate 6 테스트/CI 강화 및 문서 동기화
- 제외: 신규 비즈니스 기능 스펙 추가

## Decisions

- Security baseline(TR-BE-007) 검증 범위를 Integration + E2E로 확장한다.
- E2E 시나리오는 재실행 안정성을 위해 고정 이메일 대신 실행 시점 기반 고유 이메일을 사용한다.
- CI 파이프라인 합격 기준을 `typecheck + check:guards + lint + unit + integration + e2e`로 명시한다.

## Refine Notes

- `testing-guide.md`의 E2E 범위에 CSRF/레이트리밋 검증을 반영했다.
- `testing-guide.md`의 Build Chain 섹션에 CI 실행 게이트(타입체크/린트/테스트)를 명시했다.
- `tasks.md`의 Done Checklist에서 `TR-BE-001~014 충족` 항목을 완료로 동기화했다.
- `fr-test-mapping.md`를 추가해 FR-BE-001~020에 대한 테스트/문서 근거를 표 형태로 추적 가능하게 했다.
- `apps/api/test/scripts/check-architecture.cjs`, `check-spec-sync.cjs`를 추가해 FR-BE-009~011을 기계적으로 검증하도록 고정했다.
- Drizzle 기반 모델 문서(`data-model.md`)와 공유용 Mermaid ERD(`erd.mmd`)를 추가했다.

## Open Items

- CI 결과를 기반으로 flaky test 모니터링 기준을 운영 체크리스트에 연결할 필요가 있다.

## Next Actions

1. CI 실패 로그에서 반복 패턴(시간대/테스트 파일)을 수집해 flaky 후보를 분류한다.
2. flaky 후보에 대해 재시도 정책 또는 테스트 데이터 격리 전략을 운영 규칙으로 문서화한다.
